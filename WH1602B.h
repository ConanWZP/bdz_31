#include "stm32f4xx.h"               
#include "stm32f4xx_hal.h"
#include "timerForDisplay.h"

/*
	?????????? ??????? WH1602B-YYH-CTK:
	Vss - GND  -  ?????
	Vdd - 5V   -  ???????
	Vo  - Var  -  ???? ????????????? ????????????? ???????
	RS  - PC15 -  ???? ?????? ???? ?????????? (1 - ??????, 0 - ???????)
	R/W - PC14 -  ???? ??????????? ???????? ??????(1 ? ?????? ?????? ? ???????, 0 ? ?????? ?????? ?? ???????)
	E   - PC13 -  ???? ????????????
	DB0 - PE6  -  ????? ?????/?????? ??????
	DB1 - PE5  -  ????? ?????/?????? ??????
	DB2 - PE4  -  ????? ?????/?????? ??????
	DB3 - PE3  -  ????? ?????/?????? ??????
	DB4 - PE2  -  ????? ?????/?????? ??????
	DB5 - PE1  -  ????? ?????/?????? ??????
	DB6 - PE0  -  ????? ?????/?????? ??????
	DB7 - PB9  -  ????? ?????/?????? ??????
    A   -      -  ????? ??????? ????????? ?+?
	K   - PB8  -  ????? ??????? ????????? ?-?
*/

#define K_Set() HAL_GPIO_WritePin(GPIOB, GPIO_PIN_8, GPIO_PIN_SET) 
#define K_Reset() HAL_GPIO_WritePin(GPIOB, GPIO_PIN_8, GPIO_PIN_RESET) 

#define D0_Set() HAL_GPIO_WritePin(GPIOE, GPIO_PIN_6, GPIO_PIN_SET) 
#define D1_Set() HAL_GPIO_WritePin(GPIOE, GPIO_PIN_5, GPIO_PIN_SET)
#define D2_Set() HAL_GPIO_WritePin(GPIOE, GPIO_PIN_4, GPIO_PIN_SET) 
#define D3_Set() HAL_GPIO_WritePin(GPIOE, GPIO_PIN_3, GPIO_PIN_SET) 
#define D4_Set() HAL_GPIO_WritePin(GPIOE, GPIO_PIN_2, GPIO_PIN_SET) 
#define D5_Set() HAL_GPIO_WritePin(GPIOE, GPIO_PIN_1, GPIO_PIN_SET) 
#define D6_Set() HAL_GPIO_WritePin(GPIOE, GPIO_PIN_0, GPIO_PIN_SET) 
#define D7_Set() HAL_GPIO_WritePin(GPIOB, GPIO_PIN_9, GPIO_PIN_SET) 

#define D0_Reset() HAL_GPIO_WritePin(GPIOE, GPIO_PIN_6, GPIO_PIN_RESET) 
#define D1_Reset() HAL_GPIO_WritePin(GPIOE, GPIO_PIN_5, GPIO_PIN_RESET)
#define D2_Reset() HAL_GPIO_WritePin(GPIOE, GPIO_PIN_4, GPIO_PIN_RESET) 
#define D3_Reset() HAL_GPIO_WritePin(GPIOE, GPIO_PIN_3, GPIO_PIN_RESET) 
#define D4_Reset() HAL_GPIO_WritePin(GPIOE, GPIO_PIN_2, GPIO_PIN_RESET) 
#define D5_Reset() HAL_GPIO_WritePin(GPIOE, GPIO_PIN_1, GPIO_PIN_RESET) 
#define D6_Reset() HAL_GPIO_WritePin(GPIOE, GPIO_PIN_0, GPIO_PIN_RESET) 
#define D7_Reset() HAL_GPIO_WritePin(GPIOB, GPIO_PIN_9, GPIO_PIN_RESET) 

#define E1()  HAL_GPIO_WritePin(GPIOC, GPIO_PIN_13, GPIO_PIN_SET)
#define RW1() HAL_GPIO_WritePin(GPIOC, GPIO_PIN_14, GPIO_PIN_SET)
#define RS1() HAL_GPIO_WritePin(GPIOC, GPIO_PIN_15, GPIO_PIN_SET)

#define E0()  HAL_GPIO_WritePin(GPIOC, GPIO_PIN_13, GPIO_PIN_RESET)
#define RW0() HAL_GPIO_WritePin(GPIOC, GPIO_PIN_14, GPIO_PIN_RESET)
#define RS0() HAL_GPIO_WritePin(GPIOC, GPIO_PIN_15, GPIO_PIN_RESET)

void WriteBits8(uint8_t RS,uint8_t RW, uint8_t D7,uint8_t D6,uint8_t D5,uint8_t D4,uint8_t D3,uint8_t D2,uint8_t D1,uint8_t D0); // ??????? ?????? ????? ? ?????? 
/*	
 ??????? ??? ?????????? LCD1602:
1.	WriteBits8(0,0,0,0,0,0,0,0,0,1)                - ??????? ??????? (1,53 ??)
2.	WriteBits8(0,0,0,0,0,0,0,0,1,-)                - ????????? ??????? ? ?????? ?????? (1,53 ??)
3.	WriteBits8(0,0,0,0,0,0,0,1,I/D,SH)             - ????????? ??????????? ?????? ????????, ?????????? ?????? ?????? (39 ???)
4.	WriteBits8(0,0,0,0,0,0,1,D,C,B)                - ?????????? ??????? ??????? ??????? ? ???????????? ??????? (39 ???)
5.	WriteBits8(0,0,0,0,0,1,S/C,R/L,-,-)            - ??????? ?????? ??????? ? ?????? (39 ???)
6.	WriteBits8(0,0,0,0,1,DL,F,N,-,-)               - ????????? ?????????? ?????/?????? ??????, ?????????? ????? ??? ?????? ????????, ??????? ?????? (39 ???)
7.  WriteBits8(0,0,0,1,AC5,AC4,AC3,AC2,AC1,AC0)    - ?????? ?????? CGRAM ?????? ? ???????? ????????? (39 ???)
8.  WriteBits8(0,0,1,AC6,AC5,AC4,AC3,AC2,AC1,AC0)  - ?????? ?????? DDRAM ?????? ? ???????? ????????? (39 ???)
9.	WriteBits8(0,1,BF,AC6,AC5,AC4,AC3,AC2,AC1,AC0) - ??????? ?????? ????? ????????? ? ????????? ????????? (0 ???)
10. WriteBits8(1,0,D7,D6,D5,D4,D3,D2,D1,D0)        - ?????? ?????? ?? ?????????? ?????? ???????  (43 ???)
11. WriteBits8(1,1,D7,D6,D5,D4,D3,D2,D1,D0)        - ?????? ?????? ?? ?????????? ?????? ???????  (43 ???)

 ?????????? ?????:
1. I/D 0 - ????? ???????? ??????-??????, ????????? ????????? ????????? DDRAM/CGRAM ?????? 
       1 - ????? ???????? ?????-???????, ????????? ????????? ????????? DDRAM/CGRAM ??????
			 
2. SH  0 - ?????? ?????? ?????? ??? ?????? ????????
       1 - ?????????? ?????? ?????? ??? ?????? ????????

3. D   0 - ????????? ????? ???????, ???????? ????????, ?????????? ?????????? ?????? ???????????
       1 - ???????? ????? ???????, ?????????? ????? ??????

4. C   0 - ????????? ??????????? ???????
       1 - ???????? ??????????? ???????

5. B   0 - ????????? ??????? ??????? ???????
       1 - ???????? ??????? ??????? ???????

6. S/C 0 - ??????? ?????? ??? ??????
       1 - ??????? ????? (?????? ? ????????) ??? ??????
			 
7. R/L 0 - ????? ????? (?????? ?????? ??? ???? ?????, ??????? ?? ???? S/C)
       1 - ????? ?????? (?????? ?????? ??? ???? ?????, ??????? ?? ???? S/C)

8. DL  0 - 4-?????? ????????? ?????/?????? ??????
       1 - 8-?????? ????????? ?????/?????? ??????
			 
9.  N  0 - ???????????? ???? ?????? ??? ?????? ????????
       1 - ????????????? 2 ?????? ??? ?????? ????????
			 
10. F  0 - ?????? ?????? 5?8 ????????
       1 - ?????? ?????? 5?11 ????????
			 
10. BF 0 - ?????????? ??????? ????? ? ????????? ????? ???????
       1 - ?????????? ??????? ????? ??????????? ?????????? ????????		 
*/

void LCD_Init8(void);                         // ??????? ????????????? ??? 8-?? ??????? ?????????? ???????? ?????? 
void LCD_CharCmd(char cSym);                  // ??????? ?????? ???????? ?? ?????? ???????
void LCD_String(char* st);                    // ??????? ?????? ?????? ????????
void LCD_SelectedString(char* st,uint8_t c);  // ??????? ?????? ?????? (st - ??????? ??? ??????, ? - ????? ??????)


